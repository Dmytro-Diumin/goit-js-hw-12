{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/iziToast.js","../src/js/loader.js","../src/js/pixabay-api.js","../src/js/simpleLightbox.js","../src/js/render-functions.js","../src/js/checkBtnVisibleStatus.js","../src/js/onFormSubmit.js","../src/main.js"],"sourcesContent":["export const refs = {\n    formBlock: document.querySelector('.form-block'),\n    formElem: document.querySelector('.form-elem'),\n    formInput: document.querySelector('.form-input'),\n    formBtn: document.querySelector('.form-btn'),\n    loader: document.querySelector('.loader-block'),\n    gallery: document.querySelector('.gallery'),\n    loadBtn: document.querySelector('.load-btn'),\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nfunction onError(message) {\n    iziToast.error({\n        message: 'Sorry, there are no images matching\\n your search query. Please try again!',\n        position: 'topRight',\n      });\n}\n\nfunction onShow(message) {\n    iziToast.show({\n        message: 'You have not entered what to search for',\n        position: 'topRight',\n      });\n}\n\nfunction onInfo(message) {\n  iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n}\n\nexport const iziToastRef = { onError, onShow, onInfo};","import { refs } from \"./refs\";\n\nfunction on() {\n    refs.loader.classList.remove('hidden');\n  }\n  \nfunction off() {\n    refs.loader.classList.add('hidden');\n  }\n\nexport const loaderRef = {on, off};","import axios from 'axios';\nimport { loaderRef } from './loader';\n\nexport async function userSearch(searchImg, page) {\n    loaderRef.on();\n    const API_KEY = '42281278-b9f49de06a3dfc9ed42173e47';\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    \n    const res = await axios.get(BASE_URL + END_POINT, {\n        params: {\n            key: API_KEY,\n            q: searchImg,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page,\n        }\n    });\n    \n    return res.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport let simpleLightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionSelector: \"img\",\n    captionDelay: 250,\n  });\n\n","import { simpleLightbox } from \"./simpleLightbox\";\nimport { iziToastRef } from \"./iziToast\";\nimport { refs } from \"./refs\";\n\nexport let totalHits;\n\nfunction imagesMarkupRef(image) {\n    const {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = image;\n    return `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n    </a>\n    <div class=\"modal-info\">\n      <p>Likes <span class=\"gallery-info\">${likes}</span></p>\n      <p>Views <span class=\"gallery-info\">${views}</span></p>\n      <p>Comments <span class=\"gallery-info\">${comments}</span></p>\n      <p>Downloads <span class=\"gallery-info\">${downloads}</span></p>\n    </div>\n  </li>`;\n}\n\nfunction renderImage(data) {\n    if (!data.hits || data.hits.length === 0) {\n        iziToastRef.onError();\n    }\n    totalHits = data.totalHits;\n    const result = data.hits.map(imagesMarkupRef).join('');\n    refs.gallery.insertAdjacentHTML('beforeend', result);\n    simpleLightbox.refresh();\n}\n\nexport const renderFunctions = {imagesMarkupRef, renderImage};","import { page } from \"./onFormSubmit\";\nimport { maxPage } from \"./onFormSubmit\";\nimport { refs } from \"./refs\";\n\nexport function checkBtnVisibleStatus() {\n    if (page >= maxPage) {\n        refs.loadBtn.classList.add('hidden');\n    } else {\n        refs.loadBtn.classList.remove('hidden');\n    }\n}","import { refs } from \"./refs\";\nimport { iziToastRef } from \"./iziToast\";\nimport { userSearch } from \"./pixabay-api\";\nimport { loaderRef } from \"./loader\";\nimport { renderFunctions } from \"./render-functions\";\nimport { checkBtnVisibleStatus } from \"./checkBtnVisibleStatus\";\n\nexport let page;\nexport let maxPage;\nexport let searchImg;\n\nexport async function onFormSubmit(e) {\n    e.preventDefault();\n    searchImg = refs.formInput.value.trim();\n    page = 1;\n    \n    \n    if (searchImg === \"\" ){\n        return iziToastRef.onShow();\n    } \n\n    loaderRef.on();\n\n    try {\n        const res = await userSearch(searchImg, page);\n        maxPage = Math.ceil(res.totalHits / 15);\n        refs.gallery.innerHTML = \"\";   \n        renderFunctions.renderImage(res);   \n    } catch (error) {\n        iziToastRef.onError();\n    } finally {\n        loaderRef.off();\n        checkBtnVisibleStatus();\n        e.target.reset();\n    }\n}\n\nexport async function onLoadMoreClick() {\n\n     page += 1;\n     loaderRef.on();\n     const res = await userSearch(searchImg, page);\n     renderFunctions.renderImage(res);\n     checkBtnVisibleStatus();\n     loaderRef.off();\n\n     if (page >= maxPage) {\n        iziToastRef.onInfo();\n      }\n\n    const lastImage = refs.gallery.lastElementChild;\n    const lastImageHeight = lastImage.getBoundingClientRect().height * 2;\n    window.scrollBy({ top: lastImageHeight, behavior: 'smooth' });\n}\n","import { refs } from \"./js/refs\";\nimport { onFormSubmit } from \"./js/onFormSubmit\";\nimport { onLoadMoreClick } from \"./js/onFormSubmit\";\n\nrefs.formElem.addEventListener('submit', onFormSubmit);\nrefs.loadBtn.addEventListener('click', onLoadMoreClick);\n"],"names":["refs","onError","message","iziToast","onShow","onInfo","iziToastRef","on","off","loaderRef","userSearch","searchImg","page","API_KEY","BASE_URL","END_POINT","axios","simpleLightbox","SimpleLightbox","imagesMarkupRef","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderImage","data","result","renderFunctions","checkBtnVisibleStatus","maxPage","onFormSubmit","e","res","onLoadMoreClick","lastImageHeight"],"mappings":"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"}